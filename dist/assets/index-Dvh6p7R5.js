import{c as fe,S as Ne,U as X,v as be,o as J,j as e,B as C,x as ve,s as b,f as Y,r as j,y as Q,t as I,l as E,a as f,q as we}from"./index-BFmsBeiJ.js";import{C as ye}from"./config-drawer-Ckc5K-m7.js";import{H as Se,S as Ce}from"./search-snRT8PvS.js";import{M as De}from"./main-DeJ_A5cs.js";import{P as Re}from"./profile-dropdown-Bk_mi0O2.js";import{T as Pe}from"./theme-switch-D3yrmLEB.js";import{u as Z,a as ee,F as se,b as u,c as x,d as h,e as v,f as p,L as ae}from"./form-CEOKA2cd.js";import{s as K}from"./show-submitted-data-BtM_jUFU.js";import{D as te,a as re,b as le,c as ne,d as oe,e as ie,f as Te}from"./command-CDr2rerw.js";import{I as S}from"./input-D56alynu.js";import{P as z}from"./password-input-C4JvPeDM.js";import{S as ce,T as de,D as ke,a as me,b as g,u as Ie,c as Ae,g as Fe,d as Me,e as Ue,f as Ee,h as Ke,i as Ve,j as $e,k as ze,l as Oe,m as U,n as _e,o as O,p as He,q as _,r as Le,s as d}from"./chunk-3WUZ46N3-BHjvuDag.js";import{A as ue,a as xe,b as he}from"./alert-B4NHXP73.js";import{C as pe,o as qe,T as P,A as T,B as k,E as Be,D as Ge,g as We,h as Xe,k as H,F as L,j as Je}from"./confirm-dialog-fV3H9Ygp.js";import{T as Ye}from"./textarea-C3_NiCVS.js";import{M as Qe,a as Ze,U as es}from"./user-x-CPPu5Lp4.js";import{S as ss}from"./send-DMMAuCQB.js";import{B as as}from"./badge-Kr0hVYzQ.js";import{C as q}from"./checkbox-BXIR84L_.js";import{P as ts,a as rs,b as ls}from"./popover-C5VWUIPq.js";import{D as ns}from"./react-icons.esm-Bd55zmda.js";import{C as os,a as is,b as cs,d as ds}from"./card-rEykegnb.js";import"./index-Ba-XK1MD.js";import"./index-DR-AO5Mj.js";import"./index-CZkb8Ay_.js";import"./index-CpWr_A7A.js";import"./index-CAPHunVf.js";import"./index-BZKvHC0X.js";import"./index-CnSEveQa.js";import"./index-l_UsapRf.js";import"./layout-provider-hiGlFDRh.js";import"./separator-HBl0FY9f.js";import"./sign-out-dialog-nbTyDQUM.js";import"./index-BE2GirRn.js";import"./check-BDJeVQrC.js";import"./index-NdhH_UHq.js";import"./select-CFm5rNjf.js";import"./index-BDJfbicg.js";import"./chevron-down-DJE9snL4.js";import"./circle-question-mark-DMF6iEpV.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]],us=fe("user-pen",ms),xs=new Map([["success","bg-teal-100/30 text-teal-500 dark:text-teal-100 border-teal-200"],["pending","bg-orange-100/40 border-orange-300 text-orange-600 dark:text-orange-300 border-orange-300"],["failed","bg-destructive/10 dark:bg-destructive/10 text-destructive dark:text-destructive border-destructive/60"]]),V=[{label:"Superadmin",value:"superadmin",icon:Ne},{label:"Admin",value:"admin",icon:X},{label:"Staff",value:"staff",icon:be}],hs=J({firstName:b().min(1,"First Name is required."),lastName:b().min(1,"Last Name is required."),username:b().min(1,"Username is required."),phoneNumber:b().min(1,"Phone number is required."),email:Y({error:s=>s.input===""?"Email is required.":void 0}),password:b().transform(s=>s.trim()),role:b().min(1,"Role is required."),confirmPassword:b().transform(s=>s.trim()),isEdit:ve()}).refine(s=>s.isEdit&&!s.password?!0:s.password.length>0,{message:"Password is required.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:a.length>=8,{message:"Password must be at least 8 characters long.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:/[a-z]/.test(a),{message:"Password must contain at least one lowercase letter.",path:["password"]}).refine(({isEdit:s,password:a})=>s&&!a?!0:/\d/.test(a),{message:"Password must contain at least one number.",path:["password"]}).refine(({isEdit:s,password:a,confirmPassword:t})=>s&&!a?!0:a===t,{message:"Passwords don't match.",path:["confirmPassword"]});function B({currentRow:s,open:a,onOpenChange:t}){const n=!!s,l=Z({resolver:ee(hs),defaultValues:n?{...s,password:"",confirmPassword:"",isEdit:n}:{firstName:"",lastName:"",username:"",email:"",role:"",phoneNumber:"",password:"",confirmPassword:"",isEdit:n}}),i=r=>{l.reset(),K(r),t(!1)},o=!!l.formState.dirtyFields.password;return e.jsx(te,{open:a,onOpenChange:r=>{l.reset(),t(r)},children:e.jsxs(re,{className:"sm:max-w-lg",children:[e.jsxs(le,{className:"text-start",children:[e.jsx(ne,{children:n?"Edit User":"Add New User"}),e.jsxs(oe,{children:[n?"Update the user here. ":"Create new user here. ","Click save when you're done."]})]}),e.jsx("div",{className:"h-[26.25rem] w-[calc(100%+0.75rem)] overflow-y-auto py-1 pe-3",children:e.jsx(se,{...l,children:e.jsxs("form",{id:"user-form",onSubmit:l.handleSubmit(i),className:"space-y-4 px-0.5",children:[e.jsx(u,{control:l.control,name:"firstName",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"First Name"}),e.jsx(v,{children:e.jsx(S,{placeholder:"John",className:"col-span-4",autoComplete:"off",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"lastName",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Last Name"}),e.jsx(v,{children:e.jsx(S,{placeholder:"Doe",className:"col-span-4",autoComplete:"off",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"username",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Username"}),e.jsx(v,{children:e.jsx(S,{placeholder:"john_doe",className:"col-span-4",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"email",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Email"}),e.jsx(v,{children:e.jsx(S,{placeholder:"john.doe@gmail.com",className:"col-span-4",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"phoneNumber",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Phone Number"}),e.jsx(v,{children:e.jsx(S,{placeholder:"+123456789",className:"col-span-4",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"role",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Role"}),e.jsx(ce,{defaultValue:r.value,onValueChange:r.onChange,placeholder:"Select a role",className:"col-span-4",items:V.map(({label:m,value:N})=>({label:m,value:N}))}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"password",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Password"}),e.jsx(v,{children:e.jsx(z,{placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})}),e.jsx(u,{control:l.control,name:"confirmPassword",render:({field:r})=>e.jsxs(x,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(h,{className:"col-span-2 text-end",children:"Confirm Password"}),e.jsx(v,{children:e.jsx(z,{disabled:!o,placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...r})}),e.jsx(p,{className:"col-span-4 col-start-3"})]})})]})})}),e.jsx(ie,{children:e.jsx(C,{type:"submit",form:"user-form",children:"Save changes"})})]})})}function ps({open:s,onOpenChange:a,currentRow:t}){const[n,l]=j.useState(""),i=()=>{n.trim()===t.trxId&&(a(!1),K(t,"The following user has been deleted:"))};return e.jsx(pe,{open:s,onOpenChange:a,handleConfirm:i,disabled:n.trim()!==t.trxId,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(de,{className:"stroke-destructive me-1 inline-block",size:18})," ","Delete User"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-bold",children:t.trxId}),"?",e.jsx("br",{}),"This action will permanently remove the user with the role of"," ","from the system. This cannot be undone."]}),e.jsxs(ae,{className:"my-2",children:["Username:",e.jsx(S,{value:n,onChange:o=>l(o.target.value),placeholder:"Enter username to confirm deletion."})]}),e.jsxs(ue,{variant:"destructive",children:[e.jsx(xe,{children:"Warning!"}),e.jsx(he,{children:"Please be careful, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}const gs=J({email:Y({error:s=>s.input===""?"Please enter an email to invite.":void 0}),role:b().min(1,"Role is required."),desc:b().optional()});function js({open:s,onOpenChange:a}){const t=Z({resolver:ee(gs),defaultValues:{email:"",role:"",desc:""}}),n=l=>{t.reset(),K(l),a(!1)};return e.jsx(te,{open:s,onOpenChange:l=>{t.reset(),a(l)},children:e.jsxs(re,{className:"sm:max-w-md",children:[e.jsxs(le,{className:"text-start",children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Qe,{})," Invite User"]}),e.jsx(oe,{children:"Invite new user to join your team by sending them an email invitation. Assign a role to define their access level."})]}),e.jsx(se,{...t,children:e.jsxs("form",{id:"user-invite-form",onSubmit:t.handleSubmit(n),className:"space-y-4",children:[e.jsx(u,{control:t.control,name:"email",render:({field:l})=>e.jsxs(x,{children:[e.jsx(h,{children:"Email"}),e.jsx(v,{children:e.jsx(S,{type:"email",placeholder:"eg: john.doe@gmail.com",...l})}),e.jsx(p,{})]})}),e.jsx(u,{control:t.control,name:"role",render:({field:l})=>e.jsxs(x,{children:[e.jsx(h,{children:"Role"}),e.jsx(ce,{defaultValue:l.value,onValueChange:l.onChange,placeholder:"Select a role",items:V.map(({label:i,value:o})=>({label:i,value:o}))}),e.jsx(p,{})]})}),e.jsx(u,{control:t.control,name:"desc",render:({field:l})=>e.jsxs(x,{className:"",children:[e.jsx(h,{children:"Description (optional)"}),e.jsx(v,{children:e.jsx(Ye,{className:"resize-none",placeholder:"Add a personal note to your invitation (optional)",...l})}),e.jsx(p,{})]})})]})}),e.jsxs(ie,{className:"gap-y-2",children:[e.jsx(Te,{asChild:!0,children:e.jsx(C,{variant:"outline",children:"Cancel"})}),e.jsxs(C,{type:"submit",form:"user-invite-form",children:["Invite ",e.jsx(ss,{})]})]})]})})}const ge=Q.createContext(null);function fs({children:s}){const[a,t]=qe(null),[n,l]=j.useState(null);return e.jsx(ge,{value:{open:a,setOpen:t,currentRow:n,setCurrentRow:l},children:s})}const je=()=>{const s=Q.useContext(ge);if(!s)throw new Error("useUsers has to be used within <UsersContext>");return s};function Ns(){const{open:s,setOpen:a,currentRow:t,setCurrentRow:n}=je();return e.jsxs(e.Fragment,{children:[e.jsx(B,{open:s==="add",onOpenChange:()=>a("add")},"user-add"),e.jsx(js,{open:s==="invite",onOpenChange:()=>a("invite")},"user-invite"),t&&e.jsxs(e.Fragment,{children:[e.jsx(B,{open:s==="edit",onOpenChange:()=>{a("edit"),setTimeout(()=>{n(null)},500)},currentRow:t},`user-edit-${t.id}`),e.jsx(ps,{open:s==="delete",onOpenChange:()=>{a("delete"),setTimeout(()=>{n(null)},500)},currentRow:t},`user-delete-${t.id}`)]})]})}const D="DELETE";function bs({open:s,onOpenChange:a,table:t}){const[n,l]=j.useState(""),i=t.getFilteredSelectedRowModel().rows,o=()=>{if(n.trim()!==D){I.error(`Please type "${D}" to confirm.`);return}a(!1),I.promise(E(2e3),{loading:"Deleting users...",success:()=>(t.resetRowSelection(),`Deleted ${i.length} ${i.length>1?"users":"user"}`),error:"Error"})};return e.jsx(pe,{open:s,onOpenChange:a,handleConfirm:o,disabled:n.trim()!==D,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(de,{className:"stroke-destructive me-1 inline-block",size:18})," ","Delete ",i.length," ",i.length>1?"users":"user"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete the selected users? ",e.jsx("br",{}),"This action cannot be undone."]}),e.jsxs(ae,{className:"my-4 flex flex-col items-start gap-1.5",children:[e.jsxs("span",{className:"",children:['Confirm by typing "',D,'":']}),e.jsx(S,{value:n,onChange:r=>l(r.target.value),placeholder:`Type "${D}" to confirm.`})]}),e.jsxs(ue,{variant:"destructive",children:[e.jsx(xe,{children:"Warning!"}),e.jsx(he,{children:"Please be careful, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}function vs({table:s}){const[a,t]=j.useState(!1),n=s.getFilteredSelectedRowModel().rows,l=o=>{const r=n.map(m=>m.original);I.promise(E(2e3),{loading:`${o==="active"?"Activating":"Deactivating"} users...`,success:()=>(s.resetRowSelection(),`${o==="active"?"Activated":"Deactivated"} ${r.length} user${r.length>1?"s":""}`),error:`Error ${o==="active"?"activating":"deactivating"} users`}),s.resetRowSelection()},i=()=>{const o=n.map(r=>r.original);I.promise(E(2e3),{loading:"Inviting users...",success:()=>(s.resetRowSelection(),`Invited ${o.length} user${o.length>1?"s":""}`),error:"Error inviting users"}),s.resetRowSelection()};return e.jsxs(e.Fragment,{children:[e.jsxs(ke,{table:s,entityName:"user",children:[e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"icon",onClick:i,className:"size-8","aria-label":"Invite selected users",title:"Invite selected users",children:[e.jsx(Ze,{}),e.jsx("span",{className:"sr-only",children:"Invite selected users"})]})}),e.jsx(k,{children:e.jsx("p",{children:"Invite selected users"})})]}),e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"icon",onClick:()=>l("active"),className:"size-8","aria-label":"Activate selected users",title:"Activate selected users",children:[e.jsx(X,{}),e.jsx("span",{className:"sr-only",children:"Activate selected users"})]})}),e.jsx(k,{children:e.jsx("p",{children:"Activate selected users"})})]}),e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(C,{variant:"outline",size:"icon",onClick:()=>l("inactive"),className:"size-8","aria-label":"Deactivate selected users",title:"Deactivate selected users",children:[e.jsx(es,{}),e.jsx("span",{className:"sr-only",children:"Deactivate selected users"})]})}),e.jsx(k,{children:e.jsx("p",{children:"Deactivate selected users"})})]}),e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsxs(C,{variant:"destructive",size:"icon",onClick:()=>t(!0),className:"size-8","aria-label":"Delete selected users",title:"Delete selected users",children:[e.jsx(me,{}),e.jsx("span",{className:"sr-only",children:"Delete selected users"})]})}),e.jsx(k,{children:e.jsx("p",{children:"Delete selected users"})})]})]}),e.jsx(bs,{table:s,open:a,onOpenChange:t})]})}function ws({children:s,className:a="",contentClassName:t=""}){const n=j.useRef(null),[l,i]=j.useState(!1),o=r=>{n.current=r,r&&ys(r)&&queueMicrotask(()=>i(!0))};return l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(Be,{delayDuration:0,children:e.jsxs(P,{children:[e.jsx(T,{asChild:!0,children:e.jsx("div",{ref:o,className:f("truncate",a),children:s})}),e.jsx(k,{children:e.jsx("p",{className:t,children:s})})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(ts,{children:[e.jsx(rs,{asChild:!0,children:e.jsx("div",{ref:o,className:f("truncate",a),children:s})}),e.jsx(ls,{className:f("w-fit",t),children:e.jsx("p",{children:s})})]})})]}):e.jsx("div",{ref:o,className:f("truncate",a),children:s})}const ys=s=>s?s.offsetHeight<s.scrollHeight||s.offsetWidth<s.scrollWidth:!1;function Ss({row:s}){const{setOpen:a,setCurrentRow:t}=je();return e.jsx(e.Fragment,{children:e.jsxs(Ge,{modal:!1,children:[e.jsx(We,{asChild:!0,children:e.jsxs(C,{variant:"ghost",className:"data-[state=open]:bg-muted flex h-8 w-8 p-0",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(Xe,{align:"end",className:"w-[160px]",children:[e.jsxs(H,{onClick:()=>{t(s.original),a("edit")},children:["Edit",e.jsx(L,{children:e.jsx(us,{size:16})})]}),e.jsx(Je,{}),e.jsxs(H,{onClick:()=>{t(s.original),a("delete")},className:"text-red-500!",children:["Delete",e.jsx(L,{children:e.jsx(me,{size:16})})]})]})]})})}const G=[{id:"select",header:({table:s})=>e.jsx(q,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),meta:{className:f("max-md:sticky start-0 z-10 rounded-tl-[inherit]")},cell:({row:s})=>e.jsx(q,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"trxId",header:({column:s})=>e.jsx(g,{column:s,title:"TRX ID"}),cell:({row:s})=>e.jsx(ws,{className:"max-w-36 ps-3",children:s.getValue("trxId")}),meta:{className:f("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)]","ps-0.5 max-md:sticky start-6 @4xl/content:table-cell @4xl/content:drop-shadow-none")},enableHiding:!1},{accessorKey:"sender",header:({column:s})=>e.jsx(g,{column:s,title:"Pengirim"}),cell:({row:s})=>e.jsx("div",{className:"w-fit ps-2 text-nowrap",children:s.getValue("sender")}),meta:{className:"w-36"}},{accessorKey:"createdAt",header:({column:s})=>e.jsx(g,{column:s,title:"Tanggal"}),cell:({row:s})=>{const a=s.getValue("createdAt"),t=a?new Date(a):null;return e.jsx("div",{className:"w-fit ps-2 text-nowrap",children:t?t.toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})},meta:{className:"w-44"}},{accessorKey:"productCode",header:({column:s})=>e.jsx(g,{column:s,title:"Kode Produk"}),cell:({row:s})=>e.jsx("div",{className:"w-fit ps-2 text-nowrap",children:s.getValue("productCode")}),meta:{className:"w-36"}},{accessorKey:"productName",header:({column:s})=>e.jsx(g,{column:s,title:"Nama Produk"}),cell:({row:s})=>e.jsx("div",{className:"w-fit ps-2 text-nowrap",children:s.getValue("productName")})},{accessorKey:"phoneNumber",header:({column:s})=>e.jsx(g,{column:s,title:"Nomor Tujuan"}),cell:({row:s})=>e.jsx("div",{children:s.getValue("phoneNumber")}),enableSorting:!1},{accessorKey:"status",header:({column:s})=>e.jsx(g,{column:s,title:"Status"}),cell:({row:s})=>{const{status:a}=s.original,t=xs.get(a);return e.jsx("div",{className:"flex space-x-2",children:e.jsx(as,{variant:"outline",className:f("capitalize",t),children:s.getValue("status")})})},filterFn:(s,a,t)=>t.includes(s.getValue(a)),enableHiding:!1,enableSorting:!1},{accessorKey:"serialNumber",header:({column:s})=>e.jsx(g,{column:s,title:"SN"}),cell:({row:s})=>{const a=s.getValue("serialNumber");return e.jsx("div",{children:`${a}`})},enableSorting:!1},{accessorKey:"supplierPrice",header:({column:s})=>e.jsx(g,{column:s,title:"Harga Supplier"}),cell:({row:s})=>{const a=s.getValue("supplierPrice");return e.jsx("div",{children:`Rp ${a.toLocaleString("id-ID")}`})},enableSorting:!1},{accessorKey:"operatorResponse",header:({column:s})=>e.jsx(g,{column:s,title:"Jawaban Opeator"}),cell:({row:s})=>e.jsx("div",{children:s.getValue("operatorResponse")}),enableSorting:!1},{id:"actions",cell:Ss}];function Cs({data:s,search:a,navigate:t}){const[n,l]=j.useState({}),[i,o]=j.useState({}),[r,m]=j.useState([]),{columnFilters:N,onColumnFiltersChange:A,pagination:F,onPaginationChange:M,ensurePageInRange:$}=Ie({search:a,navigate:t,pagination:{defaultPage:1,defaultPageSize:10},globalFilter:{enabled:!1},columnFilters:[{columnId:"username",searchKey:"username",type:"string"},{columnId:"status",searchKey:"status",type:"array"},{columnId:"role",searchKey:"role",type:"array"}]}),w=Ae({data:s,columns:G,state:{sorting:r,pagination:F,rowSelection:n,columnFilters:N,columnVisibility:i},enableRowSelection:!0,onPaginationChange:M,onColumnFiltersChange:A,onRowSelectionChange:l,onSortingChange:m,onColumnVisibilityChange:o,getPaginationRowModel:Ve(),getCoreRowModel:Ke(),getFilteredRowModel:Ee(),getSortedRowModel:Ue(),getFacetedRowModel:Me(),getFacetedUniqueValues:Fe()});return j.useEffect(()=>{$(w.getPageCount())},[w,$]),e.jsxs("div",{className:f('max-sm:has-[div[role="toolbar"]]:mb-16',"flex flex-1 flex-col gap-4"),children:[e.jsx($e,{table:w,searchPlaceholder:"Cari Transaksi",searchKey:"",filters:[{columnId:"status",title:"Status",options:[{label:"Sukses",value:"success"},{label:"Pending",value:"pending"},{label:"Gagal",value:"failed"}]},{columnId:"role",title:"Role",options:V.map(y=>({...y}))}]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(ze,{children:[e.jsx(Oe,{children:w.getHeaderGroups().map(y=>e.jsx(U,{className:"group/row",children:y.headers.map(c=>e.jsx(_e,{colSpan:c.colSpan,className:f("bg-background group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted",c.column.columnDef.meta?.className,c.column.columnDef.meta?.thClassName),children:c.isPlaceholder?null:O(c.column.columnDef.header,c.getContext())},c.id))},y.id))}),e.jsx(He,{children:w.getRowModel().rows?.length?w.getRowModel().rows.map(y=>e.jsx(U,{"data-state":y.getIsSelected()&&"selected",className:"group/row",children:y.getVisibleCells().map(c=>e.jsx(_,{className:f("bg-background group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted",c.column.columnDef.meta?.className,c.column.columnDef.meta?.tdClassName),children:O(c.column.columnDef.cell,c.getContext())},c.id))},y.id)):e.jsx(U,{children:e.jsx(_,{colSpan:G.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Le,{table:w,className:"mt-auto"}),e.jsx(vs,{table:w})]})}d.seed(67890);const R=Array.from({length:500},()=>{const s="MobileIn",a=d.helpers.arrayElement(["TELKOMSEL","XL","INDOSAT","AXIS","TRI","SMARTFREN","PLN","GOPAY","OVO","DANA"]),t=d.helpers.arrayElement(["5K","10K","20K","25K","50K","100K"]),n=`${a}${t}`,l=`${a} ${t} Pulsa`,i=`TRX${d.string.alphanumeric({length:4}).toUpperCase()}`,o=`08${d.string.numeric(9)}`,r=d.helpers.arrayElement(["success","pending","failed"]),m=d.date.between({from:"2024-01-01",to:"2025-11-01"}),N=d.date.recent({days:30}),A=d.string.alphanumeric({length:10}).toUpperCase(),F=d.helpers.arrayElement(["BERHASIL","GAGAL","SEDANG DIPROSES","SALDO TIDAK CUKUP","KONEKSI ERROR"]),M=d.number.int({min:5e3,max:1e5});return{id:d.string.uuid(),trxId:i,sender:s,productCode:n,productName:l,phoneNumber:o,status:r,serialNumber:A,supplierPrice:M,operatorResponse:F,createdAt:m,updatedAt:N}}),W=we("/_authenticated/transaction/");function Ds(){const s=W.useSearch(),a=W.useNavigate(),t=R.length,n=R.filter(r=>r.status==="success").length,l=R.filter(r=>r.status==="failed").length,i=R.filter(r=>r.status==="pending").length,o=t?(n/t*100).toFixed(2):0;return e.jsxs(fs,{children:[e.jsxs(Se,{fixed:!0,children:[e.jsx(Ce,{}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Pe,{}),e.jsx(ye,{}),e.jsx(Re,{})]})]}),e.jsxs(De,{className:"flex flex-1 flex-col gap-4 sm:gap-6",children:[e.jsx("div",{className:"flex flex-wrap items-end justify-between gap-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Riwayat Transaksi"}),e.jsx("p",{className:"text-muted-foreground",children:"Kelola riwayat transaksi di sini."})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsxs(os,{className:"relative overflow-hidden rounded-xl border border-border/50 bg-gradient-to-br from-white to-slate-50 dark:from-zinc-900 dark:to-zinc-950 shadow-md transition-all duration-300 hover:shadow-lg",children:[e.jsx("div",{className:"absolute top-0 left-0 h-1 w-full bg-gradient-to-r from-green-400 via-teal-400 to-blue-500"}),e.jsx(is,{className:"pb-2",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(cs,{className:"text-sm font-medium text-black",children:"Success Rate"})})}),e.jsx(ds,{className:"flex flex-col space-y-3",children:(()=>{const r=parseFloat(o||"");let m="text-green-500",N="from-green-400 to-blue-500";return r<40?(m="text-red-500",N="from-red-500 to-red-400"):r<70&&(m="text-yellow-500",N="from-yellow-400 to-amber-500"),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:`text-3xl font-bold tracking-tight ${m}`,children:[o,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["dari ",t," transaksi"]})]}),e.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:`absolute left-0 top-0 h-full bg-gradient-to-r ${N} transition-all duration-700`,style:{width:`${o}%`}})}),e.jsx("div",{className:"h-[1px] bg-gradient-to-r from-transparent via-gray-300 to-transparent dark:via-gray-700"}),e.jsxs("div",{className:"flex items-center justify-between text-xs font-medium",children:[e.jsxs("span",{className:"text-green-500",children:["Sukses: ",n]}),e.jsxs("span",{className:"text-yellow-500",children:["Pending: ",i]}),e.jsxs("span",{className:"text-red-500",children:["Gagal: ",l]})]})]})})()})]})}),e.jsx(Cs,{data:R,search:s,navigate:a})]}),e.jsx(Ns,{})]})}const xa=Ds;export{xa as component};
